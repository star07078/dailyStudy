<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // // 第一版
    // var curry = function (fn) {
    //   var args = [].slice.call(arguments, 1);
    //   return function() {
    //     var newArgs = args.concat([].slice.call(arguments))
    //     return fn.apply(this, newArgs)
    //   }
    // }

    // function add(a, b, c) {
    //   return a + b + c;
    // }

    // var addCurry = curry(add, 1);
    // console.log(addCurry(2,3)) // 3
    //或者
    // var addCurry = curry(add, 1);
    // addCurry(2) // 3
    // 或者
    // var addCurry = curry(add);
    // addCurry(1, 2) // 3


    function memoize(fn) {
      const cache = {};
      return function() {
        // console.log('====', JSON.stringify(arguments));
        const key = JSON.stringify(arguments);
        // console.log(key, '----');
        var value = cache[key];
        if(!value) {
          value = [fn.apply(null, arguments)];  // 放在一个数组中，方便应对 undefined，null 等异常情况
          cache[key] = value;
          // console.log(cache);
        }
        console.log(cache);
        return value[0];
      }
    }

    // const fibonacci = memoize(n => n < 2 ? n: fibonacci(n - 1) + fibonacci(n - 2));
    // console.log(fibonacci(4))  // 执行后缓存了 fibonacci(2), fibonacci(3),  fibonacci(4)
    // console.log(fibonacci(10)) // fibonacci(2), fibonacci(3),  fibonacci(4) 的结果直接从缓存中取出，同时缓存其他的



    function sub_curry(fn) {
      let args = [].slice.call(arguments, 1)
      return function() {
        // console.log(arguments, '==');
        return fn.apply(this, args.concat([].slice.call(arguments)))
      }
    }
    
    // function curry(fn, length) {
    //   length = length || fn.length
    //   let slice = Array.prototype.slice
    //   return function() {
    //     if (arguments.length < length) {
    //       let args = [fn].concat(slice.call(arguments))
    //       // console.log(sub_curry.apply(this, args));
    //       return curry(sub_curry.apply(this, args), length - arguments.length)
    //     } else {
    //       return fn.apply(this, arguments);
    //     }
    //   }
    // }

    // var fn = curry(function(a, b, c) {
    //   return a + b + c
    // })

    // console.log(fn(1)(2)('c')) // ["a", "b", "c"]

    function aa(fn) {
      let args = [].slice.call(arguments, 1)
      return function () {
        return fn.apply(this, args.concat([].slice.call(arguments)))
      }
    }

    function curry(fn, length) {
      length = length || fn.length
      return function () {
        let args = [fn].concat(Array.prototype.slice.call(arguments))
        if (arguments.length < length) {
          return curry(aa.apply(this, args), length - arguments.length)
        } else {
          return fn.apply(this, arguments)
        }
      }
    }

    const replace = curry((a, b, str) => {
      return str.replace(a, b)
    });
    const replaceSpaceWith = replace(/\s*/)
    const replaceSpaceWithDash = replaceSpaceWith('-')
    console.log(replaceSpaceWithDash('kkkk,aaaa-iiii'))

  </script>
</body>
</html>



<!-- 前端
一般公司也就是增删改查，但是也要学点复杂的，虽然公司用不到 -->